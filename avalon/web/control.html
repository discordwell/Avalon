<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Avalon Control</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <main class="page">
      <header class="hero">
        <div>
          <p class="eyebrow">Avalon Control</p>
          <h1>Set the table. Deal the roles. Keep the story moving.</h1>
          <p class="subhead">
            Choose players and roles, then share the join links for humans.
          </p>
        </div>
        <div class="status">
          <div class="status-label">Server</div>
          <div class="status-value" id="serverStatus">Checking…</div>
          <div class="status-label">Phase</div>
          <div class="status-value" id="phaseValue">—</div>
        </div>
      </header>

      <section class="grid roster-grid">
        <div class="panel">
          <h2>Roster</h2>
          <div class="row split">
            <div>
              <label>Humans</label>
              <div class="counter">
                <button id="humanDown" class="ghost">-</button>
                <span id="humanCount">2</span>
                <button id="humanUp">+</button>
              </div>
            </div>
            <div>
              <label>AI Bots</label>
              <div class="counter">
                <button id="botDown" class="ghost">-</button>
                <span id="botCount">3</span>
                <button id="botUp">+</button>
              </div>
            </div>
          </div>
          <div class="row split">
            <div>
              <label>Evil players</label>
              <div class="counter">
                <button id="evilDown" class="ghost">-</button>
                <span id="evilCount">2</span>
                <button id="evilUp">+</button>
              </div>
            </div>
            <div>
              <label>Good players</label>
              <div class="counter">
                <span id="goodCount">3</span>
              </div>
            </div>
          </div>
          <p class="hint">Total players: <span id="totalCount">5</span> (must be 5–10)</p>
        </div>

        <div class="panel">
          <h2>Roles</h2>
          <div class="role-grid" id="roleGrid"></div>
          <div class="role-grid role-grid-footer">
            <button id="ladyToggle" class="role-toggle" data-feature="lady">Lady of the Lake</button>
          </div>
          <p class="hint" id="roleHint">Merlin & Assassin always included. Percival enables Morgana.</p>
        </div>
      </section>

      <section class="panel action-strip">
        <div>
          <h2>Launch</h2>
          <p class="hint">Hammer auto-approve on 5th proposal is always on.</p>
        </div>
        <div class="actions">
          <button id="createGame">Create Game</button>
          <button id="startGame" class="ghost">Launch Game</button>
        </div>
        <p class="hint" id="setupHint"></p>
      </section>

      <section class="grid">
        <div class="panel span hidden" id="joinSection">
          <h2>Join Links</h2>
          <p class="hint">Share with humans once the game is created.</p>
          <div id="joinLinks" class="link-grid">No links yet.</div>
        </div>

        <div class="panel span hidden" id="liveSection">
          <div class="split">
            <div>
              <h2>Live State</h2>
              <p class="hint">Spoilers ahead. Debug only.</p>
              <pre id="publicState">Waiting for server…</pre>
            </div>
            <div>
              <h2>Event Log</h2>
              <pre id="eventLog">No events yet.</pre>
            </div>
          </div>
        </div>
      </section>
    </main>
    <script src="/static/control.js"></script>
  </body>
</html>
